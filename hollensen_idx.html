<!DOCTYPE html>
<style>
tr:hover {
  background-color: bisque;
}
</style>
<script src="d3.js"></script>
<script type="module">
    const raw = await d3.text("sermon_meta.dat");
    const rows = raw.split("\n");
    const dat = []
    rows.forEach(row => {
        if (row.length) dat.push(row.split("|"));
    });
    dat.sort((a,b) => a[5] - b[5]);
    dat.forEach((row, ii) => {
        const a = row.slice(0,5);
        if (a[1].substring(0,3) === "Elc") a[1] = a[1].substring(9);
        dat[ii] = a;
    });

    function loadSermon(e) {
        const cols = e.currentTarget.innerText.split("\t");
        window.location.href = "elc/"+ cols[0] + ".html";
    }

    const tr = d3.select("body").append("table").attr("border", 0).selectAll("tr")
        .data(dat)
        .enter().append("tr");
    tr.selectAll("td")
        .data((d) => d)
        .enter().append("td").text((d) => d);
    tr.on("click", loadSermon);
</script>
